<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google-site-verification" content="iExbroKtO4ZRq3ZjUsyY8JJowXvx-yHOy4yQq0iS6vY" />
    
    <title>PinkDays - Period Tracker</title>

    <meta name="description" content="PinkDays is a simple period tracker and menstrual calendar. Log your flow, view your cycle history, and predict your fertile days. Backup your data or use it completely offline.">

    <!-- PWA and Mobile App Configuration -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#ff5c7c">

   <!-- Updated Favicon Links -->
    <link rel="icon" href="assets/logo.png" type="image/png">
    <link rel="icon" type="image/png" sizes="32x32" href="assets/logo.png">
    <link rel="icon" type="image/png" sizes="16x16" href="assets/logo.png">
    <link rel="shortcut icon" href="assets/logo.png">
    <link rel="apple-touch-icon" href="assets/logo.png">
    <link rel="apple-touch-icon" sizes="76x76" href="assets/logo.png">
    <link rel="apple-touch-icon" sizes="120x120" href="assets/logo.png">
    <link rel="apple-touch-icon" sizes="152x152" href="assets/logo.png">
    <link rel="apple-touch-icon" sizes="180x180" href="assets/logo.png">

    
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="PinkDays">
    <meta name="application-name" content="PinkDays">    
    <meta name="msapplication-TileImage" content="assets/logo.png">
    <meta name="msapplication-TileColor" content="#ff5c7c">
    <meta name="theme-color" content="#ff5c7c">

    <link href="assets/output.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" media="print" onload="this.media='all'">    <!-- Font Awesome CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" xintegrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    
    <style>
        body {font-family: 'Inter', sans-serif;background-color: #f9fafb;}
        .main-gradient-text { background: -webkit-linear-gradient(45deg, #ff5c7c,#ff8ca6); -webkit-background-clip: text; -webkit-text-fill-color: transparent;}
        .main-gradient-bg {background: linear-gradient(to right, #ff8ca6, #ff5c7c);}
        .main-gradient-box {background: linear-gradient(to right, #ff5c7c, #fa4366);}
        .calendar-grid {display: grid;grid-template-columns: repeat(7, 1fr);gap: 4px;}
        .day {transition: all 0.2s ease-in-out;aspect-ratio: 1 / 1;display: flex;align-items: center;justify-content: center;border-radius: 50%;}
        .flow-light { background-color: #ffb8c9; color: #9d174d; }
        .flow-medium { background-color: #ff8ca6; color: #fff; }
        .flow-heavy { background-color: #ff5c7c; color: #fff; }
        .predicted-day { background-color: #fff0f3; border: 1px dashed #ffb8c9; }
        .fertile-day { background-color: #cffafe; color: #164e63; }
        .day.today { font-weight: bold; color: #1f2937; box-shadow: 0 0 0 2px #ff8ca6; }
        .day:not(.disabled):hover { background-color: #e5e7eb; }
        .disabled { color: #9ca3af; }
        .sunday-text { color: #ef4444; }
        .modal-backdrop { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.6); backdrop-filter: blur(4px); -webkit-backdrop-filter: blur(4px); display: flex; justify-content: center; align-items: center; z-index: 50; transition: opacity 0.2s ease-in-out; }
        .legend-dot { width: 12px; height: 12px; border-radius: 50%; display: inline-block; margin-right: 6px; }
        .tab-btn.active { background-color: transparent; color: white;}
        .hidden { display: none !important; }
        .month-picker-btn { width: 100%; padding: 0.75rem; border-radius: 0.5rem; font-weight: 500; transition: background-color 0.15s; }
        .month-picker-btn:hover { background-color: #f3f4f6; }
        .month-picker-btn.active { background-color: #ff5c7c; color: white; }
        .auth-form-container { display: flex; align-items: center; justify-content: center; min-height: 100vh; padding: 1rem; }
        .screen-transition { transition: opacity 0.5s ease-in-out; }
        .is-transparent { opacity: 0; }
        #detailed-analysis { max-height: 0; opacity: 0; overflow: hidden; transition: max-height 0.5s ease-in-out, opacity 0.3s ease-in-out; }
        #detailed-analysis.expanded { max-height: 1000px; opacity: 1;}
        nav.flex { position: relative;}
        nav.flex::before {content: '';position: absolute;z-index: 1;top: 4px;bottom: 4px;border-radius: 0.375rem; background-color: #ff5c7c; transition: left 0.4s cubic-bezier(0.65, 0, 0.35, 1), width 0.4s cubic-bezier(0.65, 0, 0.35, 1);left: var(--indicator-left, 4px);width: var(--indicator-width, calc((100% - 8px) / 3));}
        .tab-btn { position: relative; z-index: 2; transition: color 0.4s ease-in-out;}
    </style>
</head>
<body class="text-gray-800">

    <!-- =========== AUTHENTICATION SCREEN =========== -->
<div id="auth-container" class="auth-form-container screen-transition is-transparent hidden">
    <div class="w-full max-w-md">
        <div class="bg-white p-8 rounded-2xl shadow-xl">
            <div class="text-center mb-8">
                <div class="flex justify-center items-baseline gap-2">
                    <img src="assets/logo_t.webp" alt="Logo" class="w-12 h-12 relative top-1" onerror="this.style.display='none'">
                    <div class="pb-2">
                        <h1 class="text-5xl font-bold main-gradient-text pb-2">PinkDays</h1>
                    </div>
                </div>
                <p class="text-gray-500">A simple and private period tracker.</p>
            </div>
            
            <div class="space-y-4">
                <input id="email-input" type="email" placeholder="Email" class="w-full px-4 py-3 bg-gray-100 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-300 transition">
                <div class="relative">
                    <input id="password-input" type="password" placeholder="Password" class="w-full px-4 py-3 bg-gray-100 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-300 transition">
                    <button id="password-toggle" class="absolute inset-y-0 right-0 flex items-center px-4 text-gray-500">
                        <i id="eye-open-icon" class="fas fa-eye"></i>
                        <i id="eye-closed-icon" class="fas fa-eye-slash hidden"></i>
                    </button>
                </div>
                <div class="flex justify-end items-center">
                    <a id="forgot-password-link" href="#" class="text-sm text-pink-500 hover:underline">Forgot Password?</a>
                </div>
            </div>

            <div id="auth-error-message" class="text-red-500 text-sm mt-4 text-center h-4"></div>

            <div class="flex items-center gap-2 mt-4">
                <button id="signin-btn" class="w-full py-3 text-white font-semibold rounded-lg shadow-md hover:opacity-90 transition main-gradient-box flex justify-center items-center h-12">
                    <span class="button-text">Sign In</span>
                    <i class="fas fa-spinner fa-spin hidden"></i>
                </button>
                <button id="signup-btn" class="w-full py-3 text-gray-700 bg-gray-200 font-semibold rounded-lg hover:bg-gray-300 transition flex justify-center items-center h-12">
                    <span class="button-text">Sign Up</span>
                    <i class="fas fa-spinner fa-spin hidden"></i>
                </button>
            </div>
            
            <div class="flex items-center my-6">
                <hr class="flex-grow border-t border-gray-300">
                <span class="px-3 text-gray-500 text-sm">OR</span>
                <hr class="flex-grow border-t border-gray-300">
            </div>

            <button id="google-signin-btn" class="w-full flex items-center justify-center gap-3 py-3 border border-gray-300 rounded-lg hover:bg-gray-100 transition h-12">
                <img src="assets/google.webp" alt="Google Icon" class="w-5 h-5 button-icon">
                <span class="button-text">Continue with Google</span>
                <i class="fas fa-spinner fa-spin hidden"></i>
            </button>

            <button id="offline-btn" class="w-full text-center mt-3 py-3 text-gray-700 bg-gray-100 font-semibold rounded-lg hover:bg-gray-200 transition">
                Continue as Guest
                <span class="block text-xs font-normal text-gray-500">(Saves data only on this device)</span>
            </button>
        </div>

            <div class="text-center mt-8">
                <a href="mailto:arunthomas04042001@gmail.com" class="inline-flex items-center gap-2 text-sm text-gray-500 hover:text-pink-500 transition-colors">
                    <i class="fas fa-envelope"></i>
                    Reach out to the developer
                </a>
            </div>
        </div>
    </div>

    <!-- =========== MAIN APPLICATION =========== -->
    <div id="app-wrapper" class="hidden screen-transition">
        <div id="app-container" class="max-w-xl mx-auto p-4">
            <header class="relative text-center my-6 flex justify-center items-center">
                <div class="flex items-baseline gap-2">
                    <img src="assets/logo_t.webp" alt="PinkDays Logo" class="w-10 h-10 relative top-1" onerror="this.style.display='none'">
                    <h1 class="text-4xl font-bold main-gradient-text">PinkDays</h1>
                </div>
                <div id="user-controls" class="absolute right-0"></div>
            </header>

            <nav class="flex justify-center bg-gray-200 rounded-lg p-1 mb-6">
                <button data-tab="stats" class="tab-btn flex-1 py-2 px-4 rounded-lg font-semibold transition-colors active">Stats</button>
                <button data-tab="calendar" class="tab-btn flex-1 py-2 px-4 rounded-lg font-semibold transition-colors">Calendar</button>
                <button data-tab="settings" class="tab-btn flex-1 py-2 px-4 rounded-lg font-semibold transition-colors">Settings</button>
            </nav>

            <div id="tab-content">
                <!-- Stats Tab -->
                <div id="stats-tab" class="tab-pane space-y-6">
                    <section class="main-gradient-box text-white p-6 rounded-2xl shadow-lg text-center">
                        <h3 class="text-lg font-semibold mb-2 opacity-90">Period In</h3>
                        <p id="next-period-countdown" class="text-5xl font-bold">--</p>
                        <p id="next-period-date" class="text-lg opacity-80 h-5 mt-2"></p>
                    </section>
                    <section class="bg-white p-6 rounded-2xl shadow-lg text-center">
                        <h3 class="text-lg font-semibold mb-2 text-gray-700">Fertile During</h3>
                        <p id="next-fertile-window" class="text-3xl font-bold main-gradient-text">--</p>
                    </section>
                    <section class="bg-white p-6 rounded-2xl shadow-lg">
                        <div class="grid grid-cols-2 gap-4 text-center">
                            <div>
                                <p class="text-gray-600">Avg. Cycle Length</p>
                                <p id="avg-cycle-length" class="text-2xl font-bold main-gradient-text">--</p>
                            </div>
                            <div>
                                <p class="text-gray-600">Avg. Period Length</p>
                                <p id="avg-period-length" class="text-2xl font-bold main-gradient-text">--</p>
                            </div>
                        </div>
                    </section>
                    
                    <div id="detailed-analysis" class="space-y-6 py-6 px-3">
                        <section class="bg-white p-6 rounded-2xl shadow-lg">
                            <h3 class="text-lg font-semibold mb-4 text-center">Average Flow Analysis</h3>
                            <div id="flow-analysis" class="text-center text-gray-600">
                            </div>
                        </section>
                        <section class="bg-white p-6 rounded-2xl shadow-lg">
                            <h3 class="text-lg font-semibold mb-4 text-center">Period History</h3>
                            <ul id="period-history-list" class="space-y-3">
                            </ul>
                        </section>
                    </div>
                    <div class="text-center mt-6">
                        <button id="show-analysis-btn" class="inline-flex items-center gap-2 px-6 py-3 main-gradient-box text-white font-semibold rounded-full shadow-sm hover:opacity-90 transition-opacity">
                            Detailed analysis <span id="analysis-arrow" class="text-2xl leading-none font-light">+</span>
                        </button>
                    </div>
                </div>

                <!-- Calendar Tab -->
                <div id="calendar-tab" class="tab-pane hidden">
                    <main class="bg-white p-6 rounded-2xl shadow-lg">
                        <div class="flex items-center justify-between mb-4">
                            <button id="prev-month-btn" class="p-2 rounded-full hover:bg-gray-100">
                                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>
                            </button>
                            <h2 id="month-year" class="text-xl font-semibold main-gradient-text cursor-pointer hover:underline"></h2>
                            <button id="next-month-btn" class="p-2 rounded-full hover:bg-gray-100">
                                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
                            </button>
                        </div>
                        <div class="grid grid-cols-7 text-center font-medium text-gray-500 mb-2">
                            <div class="sunday-text">Sun</div><div>Mon</div><div>Tue</div><div>Wed</div><div>Thu</div><div>Fri</div><div>Sat</div>
                        </div>
                        <div id="calendar-grid" class="calendar-grid"></div>
                        <div class="mt-4 pt-4 border-t flex justify-center items-center gap-4 text-xs text-gray-600">
                            <div class="flex items-center"><span class="legend-dot bg-pink-300"></span>Period</div>
                            <div class="flex items-center"><span class="legend-dot bg-cyan-200"></span>Fertile</div>
                            <div class="flex items-center"><span class="legend-dot predicted-day border border-pink-200"></span>Predicted</div>
                        </div>
                        <div class="text-center mt-4 pt-4 border-t">
                            <button id="log-period-btn" class="w-full main-gradient-box text-white font-bold py-3 px-6 rounded-lg shadow-md hover:opacity-90 transition-opacity">Log New Period</button>
                        </div>
                    </main>
                    <div class="mt-6 p-4 bg-red-100 text-red-800 rounded-lg shadow-sm text-sm border-l-4 border-red-500 text-center">
                        <p class="font-semibold">Disclaimer:</p>
                        <p>All predictions and information in this app are estimates and should not be considered medical advice.</p>
                    </div>
                </div>

                <!-- Settings Tab -->
                <div id="settings-tab" class="tab-pane hidden">
                    <div class="space-y-6">
                        <section class="bg-white p-6 rounded-2xl shadow-lg">
                            <h3 class="text-xl font-semibold text-center mb-6 main-gradient-text">Backup & Restore</h3>
                            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                                <div class="text-center">
                                    <button id="import-data-btn" class="w-full flex items-center justify-center gap-2 bg-white text-pink-500 font-bold py-3 px-6 rounded-xl shadow-md border-2 border-pink-500 hover:bg-pink-50 transition-colors">
                                    <svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z" clip-rule="evenodd" /></svg> Import
                                    </button>
                                    <input type="file" id="upload-data-input" class="hidden" accept=".json">
                                </div>
                                <div class="text-center">
                                    <button id="export-data-btn" class="w-full flex items-center justify-center gap-2 main-gradient-box text-white font-bold py-3 px-6 rounded-xl shadow-md hover:opacity-90 transition-opacity">
                                    <svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd" /></svg> Export
                                    </button>
                                </div>
                            </div>
                        </section>
                        
                        <section class="bg-white p-6 rounded-2xl shadow-lg">
                            <h3 class="text-xl font-semibold text-center mb-6 main-gradient-text">Override Average Cycle Length (days)</h3>
                            <div class="space-y-4">
                                <div class="mb-4">
                                    <div class="flex items-center space-x-2">
                                        <input type="number" id="cycle-length-input-settings" class="flex-1 p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-pink-200 focus:border-pink-300 transition-colors" placeholder="e.g. 28">
                                        <button id="save-cycle-override-btn" class="px-6 py-3 main-gradient-box text-white font-semibold rounded-xl shadow-md hover:opacity-90 transition-opacity" aria-label="Save">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 6L9 17L4 12"/></svg>
                                        </button>
                                    </div>
                                </div>
                                <div class="flex justify-center">
                                    <button id="recalculate-btn-settings" class="text-sm text-pink-600 hover:underline">Auto-calculate from history</button>
                                </div>
                            </div>
                        </section>

                        <section class="bg-white p-6 rounded-2xl shadow-lg text-center">
                            <div>
                                <button id="reset-data-btn" class="w-full bg-red-600 text-white font-bold py-3 px-6 rounded-xl shadow-md hover:bg-red-700 transition-colors">Reset All Data</button>
                            </div>
                        </section>
                    </div>

                    <footer class="text-center py-6 mt-4">
                        <a href="mailto:arunthomas04042001@gmail.com" class="inline-flex items-center gap-2 text-sm text-gray-500 hover:text-pink-500 transition-colors">
                            <i class="fas fa-envelope"></i>
                            Reach out to the developer
                        </a>
                    </footer>
                </div>
            </div>
        </div>
        
        <!-- MODALS -->
        <div id="welcome-modal" class="modal-backdrop hidden"><div class="bg-white p-8 rounded-2xl shadow-2xl w-11/12 max-w-md text-center"><img src="assets/logo_t.webp" alt="PinkDays Logo" class="w-16 h-16 mx-auto mb-4" onerror="this.style.display='none'"><h2 class="text-2xl font-bold mb-4 main-gradient-text">Welcome to PinkDays!</h2><p class="text-gray-600 mb-6">Here's a quick look at what you can do:</p><ul class="text-left space-y-3 mb-8"><li class="flex items-center"><span class="text-2xl mr-4">🗓️</span><span>Track your period & flow on the <b>Calendar</b>.</span></li><li class="flex items-center"><span class="text-2xl mr-4">📈</span><span>View predictions & history in the <b>Stats</b> tab.</span></li><li class="flex items-center"><span class="text-2xl mr-4">🔮</span><span>See your estimated <b>fertile window</b> automatically.</span></li><li class="flex items-center"><span class="text-2xl mr-4">⚙️</span><span><b>Export</b> or <b>Import</b> your data in Settings.</span></li></ul><button id="close-welcome-btn" class="w-full main-gradient-box text-white font-bold py-3 px-6 rounded-lg shadow-md hover:opacity-90 transition-opacity">Let's Get Started!</button></div></div>
        <div id="log-period-modal" class="modal-backdrop hidden"><div class="bg-white p-6 rounded-2xl shadow-2xl w-11/12 max-w-md"><h2 class="text-2xl font-bold mb-4 text-center main-gradient-text">Log Period</h2><div class="grid grid-cols-2 gap-4 mb-4"><div><label for="start-date-input" class="block text-sm font-medium text-gray-700">Start Date</label><input type="date" id="start-date-input" class="mt-1 w-full p-2 border border-gray-300 rounded-lg"></div><div><label for="end-date-input" class="block text-sm font-medium text-gray-700">End Date</label><input type="date" id="end-date-input" class="mt-1 w-full p-2 border border-gray-300 rounded-lg"></div></div><h3 class="text-md font-semibold text-center mb-2">Daily Flow</h3><div id="daily-flow-container" class="space-y-2 mb-4 max-h-48 overflow-y-auto p-2 bg-gray-50 rounded-lg"></div><div class="flex flex-col gap-2"><button id="save-log-btn" class="w-full main-gradient-box text-white font-bold py-3 px-6 rounded-lg shadow-md hover:opacity-90 transition-opacity">Save</button><button id="cancel-log-btn" class="w-full bg-gray-200 text-gray-800 font-bold py-2 px-6 rounded-lg hover:bg-gray-300">Cancel</button></div></div></div>
        <div id="month-picker-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 modal-backdrop"><div class="bg-white rounded-xl shadow-2xl p-6 w-full max-w-xs"><div class="flex justify-between items-center mb-4"><button id="prev-year-btn" class="p-2 rounded-full hover:bg-gray-200" aria-label="Previous Year"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg></button><h3 id="picker-year-display" class="text-lg font-semibold text-gray-800">2025</h3><button id="next-year-btn" class="p-2 rounded-full hover:bg-gray-200" aria-label="Next Year"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg></button></div><div id="month-grid" class="grid grid-cols-4 gap-2"></div><div class="flex justify-end mt-4"><button id="close-month-picker-btn" class="px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300">Close</button></div></div></div>
        <div id="confirm-modal" class="modal-backdrop hidden"><div class="bg-white p-8 rounded-2xl shadow-2xl w-11/12 max-w-md text-center"><h2 id="confirm-title" class="text-2xl font-bold mb-2"></h2><p id="confirm-message" class="text-gray-600 mb-6"></p><div id="confirm-options-container" class="flex gap-4"></div></div></div>
    </div>

    <script type="module" src="app.js"></script>
    <script src="service-worker.js" defer></script>
    
</body>
</html>
